1490814503937: Server running at: http://localhost:3000
1490814503996: Executing (default): CREATE OR REPLACE VIEW active_patients AS
        SELECT *
        FROM patient
        WHERE deletedAt IS NULL
1490814508131: Executing (default): SELECT `id`, `username`, `role`, `passwordHash`, `createdAt`, `updatedAt`, `deletedAt` FROM `user` AS `user` WHERE (`user`.`deletedAt` IS NULL AND `user`.`username` = 'dipak') LIMIT 1;
1490814508215: [ '3021', 'task1' ]
1490820615926: Executing (default): SELECT `id`, `username`, `role`, `passwordHash`, `createdAt`, `updatedAt`, `deletedAt` FROM `user` AS `user` WHERE (`user`.`deletedAt` IS NULL AND `user`.`username` = 'dipak') LIMIT 1;
1490820616006: Executing (default): SELECT t.*, s.StageId, count(1) as recruitedCount from trial t, stage s INNER JOIN patients pa ON s.StageId = pa.StageIdFK  WHERE t.TrialId = s.trialId GROUP BY s.StageId;
1490820616012: Testing
1490820616013: [ { TrialId: '2',
    Name: 'Epilepsy',
    Description: 'Weekly Survey for Sickle Cell Disease pain',
    IRBID: 'scd01',
    IRBStart: 2015-11-09T09:29:38.000Z,
    IRBEnd: 2016-12-25T09:29:38.000Z,
    TargetCount: 100,
    PatientPinCounter: 16,
    CreatedAt: 2016-05-18T21:15:56.000Z,
    UpdatedAt: 2016-05-31T21:12:26.000Z,
    DeletedAt: null,
    Duration: 6,
    StageId: '1',
    recruitedCount: 37 } ]
1490820616013: Trail from process percent
1490820616013: { TrialId: '2',
  Name: 'Epilepsy',
  Description: 'Weekly Survey for Sickle Cell Disease pain',
  IRBID: 'scd01',
  IRBStart: 2015-11-09T09:29:38.000Z,
  IRBEnd: 2016-12-25T09:29:38.000Z,
  TargetCount: 100,
  PatientPinCounter: 16,
  CreatedAt: 2016-05-18T21:15:56.000Z,
  UpdatedAt: 2016-05-31T21:12:26.000Z,
  DeletedAt: null,
  Duration: 6,
  StageId: '1',
  recruitedCount: 37 }
1490820616013: logging all percent
1490820616014: { recruitedPercent: 37,
  unrecruitedPercent: 63,
  completedPercent: NaN,
  activePercent: NaN }
1490820616015: Trial data is below
1490820616016: [ { TrialId: '2',
    Name: 'Epilepsy',
    Description: 'Weekly Survey for Sickle Cell Disease pain',
    IRBID: 'scd01',
    IRBStart: 2015-11-09T09:29:38.000Z,
    IRBEnd: 2016-12-25T09:29:38.000Z,
    TargetCount: 100,
    PatientPinCounter: 16,
    CreatedAt: 2016-05-18T21:15:56.000Z,
    UpdatedAt: 2016-05-31T21:12:26.000Z,
    DeletedAt: null,
    Duration: 6,
    StageId: '1',
    recruitedCount: 37,
    name: 'Epilepsy',
    start: '2015-11-09',
    end: '2016-12-25',
    recruitedPercent: 37,
    unrecruitedPercent: 63,
    activePercent: NaN,
    completedPercent: NaN } ]
1490820618060: Executing (default): SELECT `id`, `username`, `role`, `passwordHash`, `createdAt`, `updatedAt`, `deletedAt` FROM `user` AS `user` WHERE (`user`.`deletedAt` IS NULL AND `user`.`username` = 'dipak') LIMIT 1;
1490820618142: req params - 2
1490820618145: Executing (default): SELECT StageId, Name, CreatedAt, UpdatedAt, DeletedAt, TrialId FROM stage AS stage WHERE stage.DeletedAt IS NULL AND stage.TrialId = 2
1490820618150: Executing (default): SELECT tr.*, pa.PatientPin, pa.DateStarted, pa.DateCompleted, st.Name AS stage
                FROM trial AS tr
                JOIN stage AS st
                ON st.TrialId = tr.TrialId
                JOIN patients AS pa
                ON pa.StageIdFK = st.StageId
                WHERE tr.TrialId = 2
                ORDER BY pa.DateCompleted DESC
1490820618153: Executing (default): SELECT pa.PatientPin,
                SUM(si.State = 'expired') AS expiredCount,
                SUM(si.State = 'completed') AS completedCount
                FROM activity_instance AS si
                JOIN patients AS pa
                ON pa.PatientPin = si.PatientPinFK
                JOIN stage AS st
                ON st.StageId = pa.StageIdFK
                WHERE st.TrialId = 2
                AND si.EndTime > '2016-11-23T07:00:00.000Z'
                GROUP BY pa.PatientPin
1490820618153: Executing (default): SELECT `TrialId`, `Name`, `Description`, `IRBID`, `IRBStart`, `IRBEnd`, `TargetCount`, `PatientPinCounter`, `createdAt`, `updatedAt`, `deletedAt` FROM `trial` AS `trial` WHERE (`trial`.`deletedAt` IS NULL AND `trial`.`TrialId` = 2);
1490820618163: Epilepsy test log:{"TrialId":"2","Name":"Epilepsy","Description":"Weekly Survey for Sickle Cell Disease pain","IRBID":"scd01","IRBStart":"2015-11-09T09:29:38.000Z","IRBEnd":"2016-12-25T09:29:38.000Z","TargetCount":100,"PatientPinCounter":16,"createdAt":"2016-05-18T21:15:56.000Z","updatedAt":"2016-05-31T21:12:26.000Z","deletedAt":null}
1490820618168: This is Trial Name :Epilepsy
1490820618169: Trail from process percent
1490820618171: Instance {
  dataValues: 
   { TrialId: '2',
     Name: 'Epilepsy',
     Description: 'Weekly Survey for Sickle Cell Disease pain',
     IRBID: 'scd01',
     IRBStart: 2015-11-09T09:29:38.000Z,
     IRBEnd: 2016-12-25T09:29:38.000Z,
     TargetCount: 100,
     PatientPinCounter: 16,
     createdAt: 2016-05-18T21:15:56.000Z,
     updatedAt: 2016-05-31T21:12:26.000Z,
     deletedAt: null },
  _previousDataValues: 
   { TrialId: '2',
     Name: 'Epilepsy',
     Description: 'Weekly Survey for Sickle Cell Disease pain',
     IRBID: 'scd01',
     IRBStart: 2015-11-09T09:29:38.000Z,
     IRBEnd: 2016-12-25T09:29:38.000Z,
     TargetCount: 100,
     PatientPinCounter: 16,
     createdAt: 2016-05-18T21:15:56.000Z,
     updatedAt: 2016-05-31T21:12:26.000Z,
     deletedAt: null },
  _changed: {},
  '$modelOptions': 
   { timestamps: true,
     instanceMethods: {},
     classMethods: {},
     validate: {},
     freezeTableName: true,
     underscored: false,
     underscoredAll: false,
     paranoid: true,
     rejectOnEmpty: false,
     whereCollection: { TrialId: 2 },
     schema: null,
     schemaDelimiter: '',
     defaultScope: {},
     scopes: [],
     hooks: {},
     indexes: [],
     name: { plural: 'trials', singular: 'trial' },
     omitNul: false,
     sequelize: 
      Sequelize {
        options: [Object],
        config: [Object],
        dialect: [Object],
        models: [Object],
        modelManager: [Object],
        connectionManager: [Object],
        importCache: {},
        test: [Object],
        queryInterface: [Object] },
     uniqueKeys: {},
     hasPrimaryKeys: true },
  '$options': 
   { isNewRecord: false,
     '$schema': null,
     '$schemaDelimiter': '',
     raw: true,
     attributes: 
      [ 'TrialId',
        'Name',
        'Description',
        'IRBID',
        'IRBStart',
        'IRBEnd',
        'TargetCount',
        'PatientPinCounter',
        'createdAt',
        'updatedAt',
        'deletedAt' ] },
  hasPrimaryKeys: true,
  __eagerlyLoadedAssociations: [],
  isNewRecord: false }
1490820618171: logging all percent
{ recruitedPercent: NaN,
  unrecruitedPercent: NaN,
  completedPercent: 0,
  activePercent: 0 }
1490820626271: Executing (default): SELECT `id`, `username`, `role`, `passwordHash`, `createdAt`, `updatedAt`, `deletedAt` FROM `user` AS `user` WHERE (`user`.`deletedAt` IS NULL AND `user`.`username` = 'dipak') LIMIT 1;
1490820626352: Executing (default): SELECT pa.PatientPin, st.Name AS stage
                FROM patients AS pa
                JOIN stage AS st
                ON st.StageId = pa.StageIdFK
                WHERE pa.PatientPin = 3021
1490820626352: Executing (default): SELECT pa.DateCompleted, si.ActivityInstanceId, si.StartTime, si.EndTime, si.UserSubmissionTime,
                si.ActualSubmissionTime, si.activityTitle,si.State as state, st.Name AS stageName
                FROM patients AS pa
                JOIN activity_instance AS si
                ON si.PatientPinFK = pa.PatientPin
                JOIN stage AS st
                ON st.StageId = pa.StageIdFK
                WHERE pa.PatientPin = 3021
                ORDER BY si.StartTime
1490820626352: Executing (default): SELECT tr.Name, tr.TrialId
                FROM patients AS pa
                JOIN stage AS st
                ON st.StageId = pa.StageIdFK
                JOIN trial AS tr
                ON tr.TrialId = st.TrialId
                WHERE pa.PatientPin = 3021
1490820626361: Query executed in Database. Here is the trail result{"Name":"Epilepsy","TrialId":"2"}
